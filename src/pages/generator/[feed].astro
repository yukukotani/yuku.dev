---
import { fetchZennArticles } from "../../libs/fetchZennArticles";

export async function getStaticPaths({rss}) {
  const rawInternalArticles = Astro.fetchContent('../articles/**/*.md');
  const internalArticles = rawInternalArticles.map((article) => ({
    source: 'internal',
    publishDate: article.publishDate,
    title: article.title,
    url: article.url,
  }));
  const sortedArticles = internalArticles.sort((a, b) => new Date(b.publishDate) - new Date(a.publishDate));
  // Generate an RSS feed from this collection
  rss({
    // The RSS Feed title, description, and custom metadata.
    title: 'こたにゆうくのブログ',
    description: 'こたにゆうくのブログ',
    customData: `<language>ja-jp</language>`,
    // The list of items for your RSS feed, sorted.
    items: internalArticles.map(item => ({
      title: item.title,
      link: item.url,
      pubDate: item.publishDate,
    })),
    // Optional: Customize where the file is written to.
    // Otherwise, defaults to "/rss.xml"
    dest: "/feed.xml",
  });
  // Return your paths
  return [];
}
---